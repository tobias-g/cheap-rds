resource "aws_db_instance" "main" {
  allocated_storage            = 20
  allow_major_version_upgrade  = true
  apply_immediately            = true
  auto_minor_version_upgrade   = true
  backup_retention_period      = 0
  copy_tags_to_snapshot        = true
  database_insights_mode       = "standard"
  db_name                      = var.name
  engine                       = "postgresql"
  engine_lifecycle_support     = "open-source-rds-extended-support-disabled"
  identifier                   = "${var.name}-instance"
  instance_class               = "db.t4g.micro"
  iops                         = "3000"
  storage_type                 = "gp3"
  maintenance_window           = "Mon:00:00-Mon:03:00"
  max_allocated_storage        = 20
  monitoring_interval          = 0
  multi_az                     = false
  network_type                 = "IPV4"
  username                     = "master"
  password                     = "fantastic"
  performance_insights_enabled = false
  publicly_accessible          = false
  skip_final_snapshot          = true
  storage_encrypted            = false
  db_subnet_group_name         = aws_db_subnet_group.main.name
  vpc_security_group_ids       = [aws_security_group.db_access.id]
}